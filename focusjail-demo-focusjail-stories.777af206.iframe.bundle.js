"use strict";(self.webpackChunk_zendeskgarden_react_containers=self.webpackChunk_zendeskgarden_react_containers||[]).push([[3104],{"./packages/focusjail/demo/focusjail.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{FocusJail:()=>FocusJail,__namedExportsOrder:()=>__namedExportsOrder,default:()=>focusjail_stories});var esm_extends=__webpack_require__("./node_modules/@babel/runtime/helpers/esm/extends.js"),react=__webpack_require__("./node_modules/react/index.js"),prop_types=__webpack_require__("./node_modules/prop-types/index.js"),prop_types_default=__webpack_require__.n(prop_types),useFocusJail=__webpack_require__("./packages/focusjail/src/useFocusJail.ts");const FocusJailContainer=_ref=>{let{children,render=children,...options}=_ref;return react.createElement(react.Fragment,null,render((0,useFocusJail.P)(options)))};FocusJailContainer.propTypes={children:prop_types_default().func,render:prop_types_default().func,focusOnMount:prop_types_default().bool,restoreFocus:prop_types_default().bool,environment:prop_types_default().any,containerRef:prop_types_default().any.isRequired,focusElem:prop_types_default().func},FocusJailContainer.defaultProps={focusOnMount:!0,restoreFocus:!0},FocusJailContainer.__docgenInfo={description:"",methods:[],displayName:"FocusJailContainer",props:{focusOnMount:{required:!1,tsType:{name:"boolean"},description:"Directs keyboard focus to the container on mount",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},restoreFocus:{required:!1,tsType:{name:"boolean"},description:"Returns keyboard focus to the last active element on unmount",defaultValue:{value:"true",computed:!1},type:{name:"bool"}},environment:{required:!1,tsType:{name:"Document"},description:"Sets the environment where the focus loop is rendered",type:{name:"any"}},containerRef:{required:!0,tsType:{name:"ReactRefObject",raw:"React.RefObject<T>",elements:[{name:"T"}]},description:"Provides ref access to the underlying focus loop container element",type:{name:"any"}},focusElem:{required:!1,tsType:{name:"signature",type:"function",raw:"(element: HTMLElement) => any",signature:{arguments:[{type:{name:"HTMLElement"},name:"element"}],return:{name:"any"}}},description:"@ignore testing-only",type:{name:"func"}},render:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: {\n  getContainerProps: IUseFocusJailReturnValue['getContainerProps'];\n}) => ReactNode",signature:{arguments:[{type:{name:"signature",type:"object",raw:"{\n  getContainerProps: IUseFocusJailReturnValue['getContainerProps'];\n}",signature:{properties:[{key:"getContainerProps",value:{name:"IUseFocusJailReturnValue['getContainerProps']",raw:"IUseFocusJailReturnValue['getContainerProps']",required:!0}}]}},name:"options"}],return:{name:"ReactNode"}}},description:"Provides focus loop render prop functions\n\n@param {function} [options.getContainerProps] Container props getter",defaultValue:{value:"children",computed:!1},type:{name:"func"}},children:{required:!1,tsType:{name:"signature",type:"function",raw:"(options: IUseFocusJailReturnValue) => React.ReactNode",signature:{arguments:[{type:{name:"IUseFocusJailReturnValue"},name:"options"}],return:{name:"ReactReactNode",raw:"React.ReactNode"}}},description:"@ignore",type:{name:"func"}}}};__webpack_require__("./node_modules/@storybook/react/dist/index.mjs");const Component=(0,react.forwardRef)(((_ref,ref)=>{let{getContainerProps}=_ref;return react.createElement(react.Fragment,null,react.createElement("button",{className:"m-1 px-2 py-1",type:"button"},"Tabbable"),react.createElement("label",{className:"m-1"},react.createElement("span",null,"Tabbable"),react.createElement("input",{className:"ml-1"})),react.createElement("button",{className:"m-1 px-2 py-1",type:"button"},"Tabbable"),react.createElement("h1",{className:"m-1 mt-4 text-lg"},"Focus loop container"),react.createElement("div",(0,esm_extends.Z)({className:"border-2 border-dashed border-grey-400 m-1 p-2"},getContainerProps({ref,tabIndex:-1})),react.createElement("label",{className:"m-1 mt-2"},react.createElement("span",null,"Tabbable"),react.createElement("input",{className:"block ml-1"})),react.createElement("label",{className:"m-1 mt-2"},react.createElement("span",null,"Tabbable"),react.createElement("input",{className:"block ml-1"})),react.createElement("button",{className:"m-1 mt-2 px-2 py-1",type:"button"},"Tabbable")))}));Component.displayName="Component";const Container=_ref2=>{let{containerRef,...props}=_ref2;return react.createElement(FocusJailContainer,(0,esm_extends.Z)({containerRef},props),(containerProps=>react.createElement(Component,(0,esm_extends.Z)({},containerProps,{ref:containerRef}))))},Hook=_ref3=>{let{containerRef,...props}=_ref3;const hookProps=(0,useFocusJail.P)({containerRef,...props});return react.createElement(Component,(0,esm_extends.Z)({},hookProps,{ref:containerRef}))},FocusJailStory=_ref4=>{let{as,...props}=_ref4;return"container"===as?react.createElement(Container,props):react.createElement(Hook,props)};FocusJailStory.__docgenInfo={description:"",methods:[],displayName:"FocusJailStory"};const focusjail_stories={title:"Packages/FocusJail",component:FocusJailContainer},FocusJail={render:function Render(args){const containerRef=(0,react.useRef)(null);return react.createElement(FocusJailStory,(0,esm_extends.Z)({},args,{containerRef}))},name:"FocusJail",args:{as:"hook",focusOnMount:!0,restoreFocus:!0},argTypes:{as:{options:["container","hook"],control:"radio",table:{category:"Story"}},containerRef:{control:!1}}};FocusJail.parameters={...FocusJail.parameters,docs:{...FocusJail.parameters?.docs,source:{originalSource:"{\n  render: function Render(args) {\n    const containerRef = useRef<HTMLDivElement>(null);\n    return <FocusJailStory {...args} containerRef={containerRef} />;\n  },\n  name: 'FocusJail',\n  args: {\n    as: 'hook',\n    focusOnMount: true,\n    restoreFocus: true\n  },\n  argTypes: {\n    as: {\n      options: ['container', 'hook'],\n      control: 'radio',\n      table: {\n        category: 'Story'\n      }\n    },\n    containerRef: {\n      control: false\n    }\n  }\n}",...FocusJail.parameters?.docs?.source}}};const __namedExportsOrder=["FocusJail"]},"./packages/focusjail/src/useFocusJail.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{P:()=>useFocusJail});var react__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/react/index.js"),_zendeskgarden_container_utilities__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./packages/utilities/src/utils/composeEventHandlers.ts"),_zendeskgarden_container_utilities__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./packages/utilities/src/utils/KeyboardEventValues.ts"),tabbable__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tabbable/dist/index.esm.js"),dom_helpers_activeElement__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/dom-helpers/esm/activeElement.js");const useFocusJail=function(_temp){let{focusOnMount=!0,restoreFocus=!0,environment,focusElem,containerRef}=void 0===_temp?{containerRef:(0,react__WEBPACK_IMPORTED_MODULE_0__.createRef)()}:_temp;const restoreFocusElement=(0,react__WEBPACK_IMPORTED_MODULE_0__.useRef)(null),[currentRef,setCurrentRef]=(0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(containerRef.current);(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{containerRef.current!==currentRef&&setCurrentRef(containerRef.current)}));const focusElement=(0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)((element=>{const htmlElement=element;focusElem?focusElem(htmlElement):htmlElement&&htmlElement.focus()}),[focusElem]),getInitialFocusNode=()=>{const doc=environment||document,activeElem=(0,dom_helpers_activeElement__WEBPACK_IMPORTED_MODULE_1__.Z)(doc),containerElem=currentRef;return containerElem.contains(activeElem)?activeElem:containerElem};return(0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)((()=>{const doc=environment||document;return restoreFocusElement.current=(0,dom_helpers_activeElement__WEBPACK_IMPORTED_MODULE_1__.Z)(doc),focusOnMount&&focusElement(currentRef),()=>{const isBodyInactive=restoreFocusElement.current!==doc.body,hasActiveElement=null!==restoreFocusElement.current;isBodyInactive&&hasActiveElement&&restoreFocus&&focusElement(restoreFocusElement.current)}}),[focusOnMount,restoreFocus,environment,focusElement,currentRef]),{getContainerProps:function(_temp2){let{onKeyDown,...other}=void 0===_temp2?{}:_temp2;return{onKeyDown:(0,_zendeskgarden_container_utilities__WEBPACK_IMPORTED_MODULE_3__.M)(onKeyDown,(event=>{if(event.key!==_zendeskgarden_container_utilities__WEBPACK_IMPORTED_MODULE_4__.t.TAB)return;(()=>{if(!currentRef)throw new Error("Accessibility Error: You must apply the ref prop to your containing element.")})();const tabbableNodes=(()=>{const elements=(0,tabbable__WEBPACK_IMPORTED_MODULE_2__.ht)(currentRef);return{firstItem:elements[0]||getInitialFocusNode(),lastItem:elements[elements.length-1]||getInitialFocusNode()}})();!event.shiftKey||event.target!==tabbableNodes.firstItem&&event.target!==currentRef||(focusElement(tabbableNodes.lastItem),event.preventDefault()),event.shiftKey||event.target!==tabbableNodes.lastItem||(focusElement(tabbableNodes.firstItem),event.preventDefault())})),"data-garden-container-id":"containers.focusjail","data-garden-container-version":"storybook",...other}},focusElement}}},"./packages/utilities/src/utils/KeyboardEventValues.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{t:()=>KEYS});const KEYS={ALT:"Alt",ASTERISK:"*",BACKSPACE:"Backspace",COMMA:",",DELETE:"Delete",DOWN:"ArrowDown",END:"End",ENTER:"Enter",ESCAPE:"Escape",HOME:"Home",LEFT:"ArrowLeft",NUMPAD_ADD:"Add",NUMPAD_DECIMAL:"Decimal",NUMPAD_DIVIDE:"Divide",NUMPAD_ENTER:"Enter",NUMPAD_MULTIPLY:"Multiply",NUMPAD_SUBTRACT:"Subtract",PAGE_DOWN:"PageDown",PAGE_UP:"PageUp",PERIOD:".",RIGHT:"ArrowRight",SHIFT:"Shift",SPACE:" ",TAB:"Tab",UNIDENTIFIED:"Unidentified",UP:"ArrowUp"}},"./packages/utilities/src/utils/composeEventHandlers.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{function composeEventHandlers(){for(var _len=arguments.length,fns=new Array(_len),_key=0;_key<_len;_key++)fns[_key]=arguments[_key];return function(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];return fns.some((fn=>(fn&&fn(event,...args),event&&event.defaultPrevented)))}}__webpack_require__.d(__webpack_exports__,{M:()=>composeEventHandlers})}}]);