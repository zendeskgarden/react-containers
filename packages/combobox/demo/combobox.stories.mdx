import { Meta, ArgsTable, Canvas, Story } from '@storybook/addon-docs';
import { useArgs } from '@storybook/client-api';
import { ComboboxContainer } from '@zendeskgarden/container-combobox';
import { ComboboxStory } from './stories/ComboboxStory';

<Meta
  title="Packages/Combobox"
  component={ComboboxContainer}
  args={{
    as: 'hook',
    layout: 'Garden',
    values: ['Option 1', 'Option 2', 'Option 3', 'Option 4', 'Option 5']
  }}
  argTypes={{
    as: { options: ['container', 'hook'], control: 'radio', table: { category: 'Story' } },
    layout: { options: ['Downshift', 'Garden'], control: 'radio', table: { category: 'Story' } }
  }}
/>

# API

<ArgsTable />

# Demo

## Uncontrolled

<Canvas>
  <Story name="Uncontrolled" argTypes={{ isExpanded: { control: false } }}>
    {args => <ComboboxStory {...args} />}
  </Story>
</Canvas>

## Controlled

<Canvas>
  <Story
    name="Controlled"
    args={{ isExpanded: false, inputValue: '', activeIndex: -1 }}
    argTypes={{ defaultExpanded: { control: false } }}
  >
    {args => {
      const updateArgs = useArgs()[1];
      const handleExpansionChange = ({ isExpanded, inputValue }) =>
        updateArgs({ isExpanded, inputValue });
      const handleActiveIndexChange = ({ activeIndex }) => updateArgs({ activeIndex });
      const handleSelectionChange = ({ selectedValue }) => updateArgs({ selectedValue });
      return (
        <ComboboxStory
          {...args}
          selectedValue={args.isMultiselectable ? [] : ''}
          onExpansionChange={handleExpansionChange}
          onActiveIndexChange={handleActiveIndexChange}
          onSelectionChange={handleSelectionChange}
        />
      );
    }}
  </Story>
</Canvas>
