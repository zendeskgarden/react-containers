import { Meta, ArgsTable, Canvas, Story } from '@storybook/addon-docs';
import { useArgs } from '@storybook/client-api';
import { ComboboxContainer } from '@zendeskgarden/container-combobox';
import { ComboboxStory } from './stories/ComboboxStory';

<Meta
  title="Packages/Combobox"
  component={ComboboxContainer}
  args={{
    as: 'hook',
    layout: 'Garden',
    values: ['Option 1', 'Option 2', 'Option 3', 'Option 4', 'Option 5']
  }}
  argTypes={{
    as: { options: ['container', 'hook'], control: 'radio', table: { category: 'Story' } },
    layout: { options: ['Downshift', 'Garden'], control: 'radio', table: { category: 'Story' } },
    inputRef: { control: false },
    listboxRef: { control: false },
    triggerRef: { control: false }
  }}
/>

# API

<ArgsTable />

# Demo

## Uncontrolled

<Canvas>
  <Story
    name="Uncontrolled"
    argTypes={{
      isExpanded: { control: false },
      inputValue: { control: false },
      activeIndex: { control: false },
      selectionValue: { control: false }
    }}
  >
    {args => <ComboboxStory {...args} />}
  </Story>
</Canvas>

## Controlled

<Canvas>
  <Story
    name="Controlled"
    args={{ isExpanded: false, inputValue: '', activeIndex: -1, selectionValue: null }}
    argTypes={{ defaultExpanded: { control: false }, defaultSelectionValue: { control: false } }}
  >
    {args => {
      const updateArgs = useArgs()[1];
      const handleExpansionChange = isExpanded => updateArgs({ isExpanded });
      const handleActiveIndexChange = activeIndex => updateArgs({ activeIndex });
      const handleInputChange = inputValue => updateArgs({ inputValue });
      const handleSelectionChange = selectionValue => updateArgs({ selectionValue });
      const handleChange = changes => console.log(changes);
      return (
        <ComboboxStory
          {...args}
          onExpansionChange={handleExpansionChange}
          onActiveIndexChange={handleActiveIndexChange}
          onInputChange={handleInputChange}
          onSelectionChange={handleSelectionChange}
          onChange={handleChange}
        />
      );
    }}
  </Story>
</Canvas>
